import {
  computed,
  createBaseVNode,
  createCommentVNode,
  createElementBlock,
  createVNode,
  defineComponent,
  guardReactiveProps,
  normalizeClass,
  normalizeProps,
  normalizeStyle,
  openBlock,
  ref,
  renderSlot,
  resolveComponent,
  toDisplayString,
  withCtx
} from "./chunk-MYEHH3VS.js";
import "./chunk-BUSYA2B4.js";

// node_modules/vue3-tournament/dist/tournament-bracket.mjs
var S = defineComponent({
  name: "GameMatch",
  props: {
    bracketNode: {
      type: Object,
      default: () => ({})
    },
    highlightedTeamId: {
      type: [String, Number],
      default: void 0
    }
  },
  setup(e, { emit: a }) {
    return {
      getPlayerClass: (t) => {
        let n = "";
        return e.highlightedTeamId === t.id && !t.disabled && (n += " highlight"), t.disabled && (n += " disabled"), n;
      },
      onClick: (t) => {
        var n, o, h;
        a("onMatchClick", (o = (n = e.bracketNode) == null ? void 0 : n.match) == null ? void 0 : o.id), a("onParticipantClick", t, (h = e.bracketNode) == null ? void 0 : h.match);
      },
      highlightTeam: (t) => {
        a("onSelectedTeam", t);
      },
      unhighlightTeam: () => {
        a("onDeselectedTeam");
      }
    };
  }
});
var y = (e, a) => {
  const s = e.__vccOpts || e;
  for (const [m, g] of a)
    s[m] = g;
  return s;
};
var B = { class: "vt-item-feedIn" };
var D = { class: "title" };
var w = { class: "name" };
function z(e, a, s, m, g, k) {
  var t, n;
  return openBlock(), createElementBlock("div", B, [
    createBaseVNode("div", null, [
      renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps({ match: (t = e.bracketNode) == null ? void 0 : t.match })), () => {
        var o, h;
        return [
          createBaseVNode("div", D, [
            createBaseVNode("span", null, toDisplayString((h = (o = e.bracketNode) == null ? void 0 : o.match) == null ? void 0 : h.title), 1)
          ])
        ];
      }),
      createBaseVNode("div", {
        class: normalizeClass(["vt-feedIn", e.getPlayerClass(e.bracketNode.match.feedIn)]),
        onMouseover: a[0] || (a[0] = (o) => e.highlightTeam(e.bracketNode.match.feedIn.id)),
        onMouseleave: a[1] || (a[1] = (...o) => e.unhighlightTeam && e.unhighlightTeam(...o)),
        onClick: a[2] || (a[2] = (o) => e.onClick(e.bracketNode.match.feedIn))
      }, [
        renderSlot(e.$slots, "feedIn", normalizeProps(guardReactiveProps({ team: (n = e.bracketNode.match) == null ? void 0 : n.feedIn, match: e.bracketNode.match })), () => {
          var o, h;
          return [
            createBaseVNode("span", w, toDisplayString((h = (o = e.bracketNode.match) == null ? void 0 : o.feedIn) == null ? void 0 : h.name), 1)
          ];
        })
      ], 34)
    ])
  ]);
}
var G = y(S, [["render", z]]);
var R = defineComponent({
  name: "GameMatch",
  props: {
    bracketNode: {
      type: Object,
      default: () => ({})
    },
    highlightedTeamId: {
      type: [String, Number],
      default: void 0
    }
  },
  setup(e, { emit: a }) {
    return {
      getPlayerClass: (t) => {
        var o, h;
        let n = "";
        return ((o = e.bracketNode.match) == null ? void 0 : o.winner) !== void 0 && t.id === ((h = e.bracketNode.match) == null ? void 0 : h.winner) && (n = "winner"), e.highlightedTeamId === t.id && !t.disabled && (n += " highlight"), t.disabled && (n += " disabled"), n;
      },
      onClick: (t) => {
        var n, o, h;
        a("onMatchClick", (o = (n = e.bracketNode) == null ? void 0 : n.match) == null ? void 0 : o.id), a("onParticipantClick", t, (h = e.bracketNode) == null ? void 0 : h.match);
      },
      highlightTeam: (t) => {
        a("onSelectedTeam", t);
      },
      unhighlightTeam: () => {
        a("onDeselectedTeam");
      }
    };
  }
});
var V = { class: "vt-item-teams" };
var j = { class: "title" };
var A = { class: "name" };
var F = {
  key: 0,
  class: "score"
};
var E = { class: "name" };
var q = {
  key: 0,
  class: "score"
};
function H(e, a, s, m, g, k) {
  return openBlock(), createElementBlock("div", V, [
    createBaseVNode("div", null, [
      renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps({ match: e.bracketNode.match })), () => {
        var t;
        return [
          createBaseVNode("div", j, [
            createBaseVNode("span", null, toDisplayString((t = e.bracketNode.match) == null ? void 0 : t.title), 1)
          ])
        ];
      }),
      createBaseVNode("div", {
        class: normalizeClass([
          "vt-team",
          "vt-team-top",
          e.getPlayerClass(e.bracketNode.match.team1)
        ]),
        onMouseover: a[0] || (a[0] = (t) => e.highlightTeam(e.bracketNode.match.team1.id)),
        onMouseleave: a[1] || (a[1] = (...t) => e.unhighlightTeam && e.unhighlightTeam(...t)),
        onClick: a[2] || (a[2] = (t) => e.onClick(e.bracketNode.match.team1))
      }, [
        renderSlot(e.$slots, "team", normalizeProps(guardReactiveProps({ team: e.bracketNode.match.team1, match: e.bracketNode.match })), () => [
          renderSlot(e.$slots, "team.name", normalizeProps(guardReactiveProps({ team: e.bracketNode.match.team1, match: e.bracketNode.match })), () => [
            createBaseVNode("span", A, toDisplayString(e.bracketNode.match.team1.name), 1)
          ]),
          renderSlot(e.$slots, "team.score", normalizeProps(guardReactiveProps({ team: e.bracketNode.match.team1, match: e.bracketNode.match })), () => [
            e.bracketNode.match.team1.score != null && e.bracketNode.match.team1.score >= 0 ? (openBlock(), createElementBlock("span", F, toDisplayString(e.bracketNode.match.team1.score), 1)) : createCommentVNode("", true)
          ])
        ])
      ], 34),
      createBaseVNode("div", {
        class: normalizeClass([
          "vt-team",
          "vt-team-bot",
          e.getPlayerClass(e.bracketNode.match.team2)
        ]),
        onMouseover: a[3] || (a[3] = (t) => e.highlightTeam(e.bracketNode.match.team2.id)),
        onMouseleave: a[4] || (a[4] = (...t) => e.unhighlightTeam && e.unhighlightTeam(...t)),
        onClick: a[5] || (a[5] = (t) => e.onClick(e.bracketNode.match.team2))
      }, [
        renderSlot(e.$slots, "team", normalizeProps(guardReactiveProps({ team: e.bracketNode.match.team2, match: e.bracketNode.match })), () => [
          renderSlot(e.$slots, "team.name", normalizeProps(guardReactiveProps({ team: e.bracketNode.match.team2, match: e.bracketNode.match })), () => [
            createBaseVNode("span", E, toDisplayString(e.bracketNode.match.team2.name), 1)
          ]),
          renderSlot(e.$slots, "team.score", normalizeProps(guardReactiveProps({ team: e.bracketNode.match.team2, match: e.bracketNode.match })), () => [
            e.bracketNode.match.team2.score != null && e.bracketNode.match.team2.score >= 0 ? (openBlock(), createElementBlock("span", q, toDisplayString(e.bracketNode.match.team2.score), 1)) : createCommentVNode("", true)
          ])
        ])
      ], 34)
    ])
  ]);
}
var J = y(R, [["render", H]]);
var K = defineComponent({
  name: "BracketNode",
  components: {
    GameMatch: J,
    FeedIn: G
  },
  props: {
    bracketNode: {
      type: Object,
      default: () => ({})
    },
    highlightedTeamId: {
      type: [String, Number],
      default: void 0
    }
  },
  setup(e, { emit: a }) {
    return {
      matchArePresent: computed(() => e.bracketNode.match !== void 0),
      getBracketNodeClass: (o) => o.children[0] || o.children[1] ? "vt-item-parent" : o.hasParent ? "vt-item-child" : "",
      onMatchClick: (o) => {
        a("onMatchClick", o);
      },
      highlightTeam: (o) => {
        a("onSelectedTeam", o);
      },
      unhighlightTeam: () => {
        a("onDeselectedTeam");
      },
      onParticipantClick: (o, h) => {
        a("onParticipantClick", o, h);
      }
    };
  }
});
var L = {
  key: 0,
  class: "vt-item"
};
var Q = {
  key: 2,
  class: "vt-item-children"
};
var U = {
  key: 0,
  class: "vt-item-child"
};
var W = {
  key: 1,
  class: "vt-item-child"
};
function X(e, a, s, m, g, k) {
  var h, $;
  const t = resolveComponent("FeedIn"), n = resolveComponent("GameMatch"), o = resolveComponent("BracketNode", true);
  return e.matchArePresent ? (openBlock(), createElementBlock("div", L, [
    (($ = (h = e.bracketNode) == null ? void 0 : h.match) == null ? void 0 : $.feedIn) !== void 0 ? (openBlock(), createElementBlock("div", {
      key: 0,
      class: normalizeClass(e.getBracketNodeClass(e.bracketNode))
    }, [
      createVNode(t, {
        "bracket-node": e.bracketNode,
        "highlighted-team-id": e.highlightedTeamId,
        onOnSelectedTeam: e.highlightTeam,
        onOnDeselectedTeam: e.unhighlightTeam,
        onOnMatchClick: e.onMatchClick,
        onOnParticipantClick: e.onParticipantClick
      }, {
        "match.title": withCtx((i) => [
          renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps(i)))
        ]),
        feedIn: withCtx((i) => [
          renderSlot(e.$slots, "feedIn", normalizeProps(guardReactiveProps(i)))
        ]),
        _: 3
      }, 8, ["bracket-node", "highlighted-team-id", "onOnSelectedTeam", "onOnDeselectedTeam", "onOnMatchClick", "onOnParticipantClick"])
    ], 2)) : (openBlock(), createElementBlock("div", {
      key: 1,
      class: normalizeClass(e.getBracketNodeClass(e.bracketNode))
    }, [
      createVNode(n, {
        "bracket-node": e.bracketNode,
        "highlighted-team-id": e.highlightedTeamId,
        onOnSelectedTeam: e.highlightTeam,
        onOnDeselectedTeam: e.unhighlightTeam,
        onOnMatchClick: e.onMatchClick,
        onOnParticipantClick: e.onParticipantClick
      }, {
        "match.title": withCtx((i) => [
          renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps(i)))
        ]),
        team: withCtx((i) => [
          renderSlot(e.$slots, "team", normalizeProps(guardReactiveProps(i)))
        ]),
        "team.name": withCtx((i) => [
          renderSlot(e.$slots, "team.name", normalizeProps(guardReactiveProps(i)))
        ]),
        "team.score": withCtx((i) => [
          renderSlot(e.$slots, "team.score", normalizeProps(guardReactiveProps(i)))
        ]),
        _: 3
      }, 8, ["bracket-node", "highlighted-team-id", "onOnSelectedTeam", "onOnDeselectedTeam", "onOnMatchClick", "onOnParticipantClick"])
    ], 2)),
    e.bracketNode.children[0] || e.bracketNode.children[1] ? (openBlock(), createElementBlock("div", Q, [
      e.bracketNode.children[0] ? (openBlock(), createElementBlock("div", U, [
        createVNode(o, {
          "bracket-node": e.bracketNode.children[0],
          "highlighted-team-id": e.highlightedTeamId,
          onOnSelectedTeam: e.highlightTeam,
          onOnDeselectedTeam: e.unhighlightTeam,
          onOnMatchClick: e.onMatchClick,
          onOnParticipantClick: e.onParticipantClick
        }, {
          "match.title": withCtx((i) => [
            renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps(i)))
          ]),
          team: withCtx((i) => [
            renderSlot(e.$slots, "team", normalizeProps(guardReactiveProps(i)))
          ]),
          "team.name": withCtx((i) => [
            renderSlot(e.$slots, "team.name", normalizeProps(guardReactiveProps(i)))
          ]),
          "team.score": withCtx((i) => [
            renderSlot(e.$slots, "team.score", normalizeProps(guardReactiveProps(i)))
          ]),
          feedIn: withCtx((i) => [
            renderSlot(e.$slots, "feedIn", normalizeProps(guardReactiveProps(i)))
          ]),
          _: 3
        }, 8, ["bracket-node", "highlighted-team-id", "onOnSelectedTeam", "onOnDeselectedTeam", "onOnMatchClick", "onOnParticipantClick"])
      ])) : createCommentVNode("", true),
      e.bracketNode.children[1] ? (openBlock(), createElementBlock("div", W, [
        createVNode(o, {
          "bracket-node": e.bracketNode.children[1],
          "highlighted-team-id": e.highlightedTeamId,
          onOnSelectedTeam: e.highlightTeam,
          onOnDeselectedTeam: e.unhighlightTeam,
          onOnMatchClick: e.onMatchClick,
          onOnParticipantClick: e.onParticipantClick
        }, {
          "match.title": withCtx((i) => [
            renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps(i)))
          ]),
          team: withCtx((i) => [
            renderSlot(e.$slots, "team", normalizeProps(guardReactiveProps(i)))
          ]),
          "team.name": withCtx((i) => [
            renderSlot(e.$slots, "team.name", normalizeProps(guardReactiveProps(i)))
          ]),
          "team.score": withCtx((i) => [
            renderSlot(e.$slots, "team.score", normalizeProps(guardReactiveProps(i)))
          ]),
          feedIn: withCtx((i) => [
            renderSlot(e.$slots, "feedIn", normalizeProps(guardReactiveProps(i)))
          ]),
          _: 3
        }, 8, ["bracket-node", "highlighted-team-id", "onOnSelectedTeam", "onOnDeselectedTeam", "onOnMatchClick", "onOnParticipantClick"])
      ])) : createCommentVNode("", true)
    ])) : createCommentVNode("", true)
  ])) : createCommentVNode("", true);
}
var Y = y(K, [["render", X]]);
var Z = (e) => {
  if (!e)
    return;
  const a = e.length;
  let s = [], m = [], g = 0;
  for (let k = 0; k < a; k++) {
    if (s = e[k].matchs.map((t) => (g++, t.id = t.id ?? g, t.title = t.title ?? String(g), {
      match: t,
      children: [],
      hasParent: !!e[k + 1]
    })), m.length === 0) {
      m = s;
      continue;
    }
    for (let t = 0; t < m.length; t++) {
      const n = Math.floor(t / 2);
      s[n].children.push(m[t]);
    }
    m = s;
  }
  return s[0] || void 0;
};
var _ = defineComponent({
  components: {
    BracketNode: Y
  },
  props: {
    rounds: {
      type: Array,
      default: () => []
    },
    format: {
      type: String,
      default: "default"
    },
    textColor: {
      type: String,
      default: "#ffffff"
    },
    titleColor: {
      type: String,
      default: "#9d999d"
    },
    teamBackgroundColor: {
      type: String,
      default: "#59595e"
    },
    highlightTeamBackgroundColor: {
      type: String,
      default: "#222222"
    },
    scoreBackgroundColor: {
      type: String,
      default: "#787a7f"
    },
    winnerScoreBackgroundColor: {
      type: String,
      default: "#ee7b3c"
    }
  },
  setup(e, { emit: a }) {
    const s = ref(void 0), m = (h) => {
      a("onMatchClick", h);
    }, g = (h, $) => {
      a("onParticipantClick", h, $);
    }, k = (h) => {
      s.value = h;
    }, t = () => {
      s.value = void 0;
    }, n = computed(() => {
      let h = e.rounds;
      return Z(h);
    }), o = computed(() => ({
      "--text-color": e.textColor,
      "--title-color": e.titleColor,
      "--team-background-color": e.teamBackgroundColor,
      "--highlight-team-background-color": e.highlightTeamBackgroundColor,
      "--score-background-color": e.scoreBackgroundColor,
      "--winner-score-background-color": e.winnerScoreBackgroundColor
    }));
    return {
      highlightedTeamId: s,
      onMatchClick: m,
      onParticipantClick: g,
      highlightTeam: k,
      unhighlightTeam: t,
      recursiveBracket: n,
      cssVars: o
    };
  }
});
function x(e, a, s, m, g, k) {
  const t = resolveComponent("BracketNode");
  return e.recursiveBracket ? (openBlock(), createElementBlock("div", {
    key: 0,
    class: "vt-wrapper",
    style: normalizeStyle(e.cssVars)
  }, [
    createVNode(t, {
      "bracket-node": e.recursiveBracket,
      "highlighted-team-id": e.highlightedTeamId,
      onOnSelectedTeam: e.highlightTeam,
      onOnDeselectedTeam: e.unhighlightTeam,
      onOnMatchClick: e.onMatchClick,
      onOnParticipantClick: e.onParticipantClick
    }, {
      "match.title": withCtx((n) => [
        renderSlot(e.$slots, "match.title", normalizeProps(guardReactiveProps(n)))
      ]),
      team: withCtx((n) => [
        renderSlot(e.$slots, "team", normalizeProps(guardReactiveProps(n)))
      ]),
      "team.name": withCtx((n) => [
        renderSlot(e.$slots, "team.name", normalizeProps(guardReactiveProps(n)))
      ]),
      "team.score": withCtx((n) => [
        renderSlot(e.$slots, "team.score", normalizeProps(guardReactiveProps(n)))
      ]),
      feedIn: withCtx((n) => [
        renderSlot(e.$slots, "feedIn", normalizeProps(guardReactiveProps(n)))
      ]),
      _: 3
    }, 8, ["bracket-node", "highlighted-team-id", "onOnSelectedTeam", "onOnDeselectedTeam", "onOnMatchClick", "onOnParticipantClick"])
  ], 4)) : createCommentVNode("", true);
}
var te = y(_, [["render", x]]);
export {
  te as TournamentBracket
};
//# sourceMappingURL=vue3-tournament.js.map
